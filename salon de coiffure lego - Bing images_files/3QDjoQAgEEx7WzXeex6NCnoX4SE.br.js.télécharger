var MySavesAPIUtils;(function(n){function r(n,t){var i,u,f=n.indexOf("."),e;return f>-1?(e=n.split(".",1)[0],e==="0")?[r(n.substring(f+1),t)]:(i={},i[e]=r(n.substring(f+1),t),i):(u={},u[n]=t,u)}function v(){if(typeof sj_cook!="undefined"){var n=sj_cook.get("_SS","SID");return"&sid="+(n||_G.SID)}return""}function y(n,t){var i=n.indexOf("?");return n+(t.length?(i==-1?"?":i==n.length-1?"":"&")+t.substring(+(t[0]=="&")):"")+v()}function p(n){for(var t=n,r,i;t&&(r=t.indexOf("<!--<![CDATA["))>=0;){if(i=t.indexOf("]\]>-->"),i<0)break;t=t.substr(0,r)+t.substr(i+6)}return t}function w(n){try{return JSON.parse(p(n))}catch(t){return null}}function t(n,t,r,u,f){var e=sj_gx();e.onreadystatechange=function(){var n,t,i;try{e.readyState==4&&(n=e.status,t=e.response,n==200&&t?(i=w(t),i&&u&&!u(i)&&f&&f()):f&&(n>=400||n==0)&&f())}catch(r){f&&f()}};e.open("POST",y(c+n,(t||"")+(i?"&PIG="+i:"")),!0);e.setRequestHeader("Content-type","application/json");_G.SID&&e.setRequestHeader("SID",_G.SID);e.withCredentials=!0;e.send(JSON.stringify(r))}function a(n,t,i,u){var f,s,e,o;u===void 0&&(u={});f=u;i&&(f.type=i);for(s in n)e=n[s],o=t[s],o&&o.length&&(f[e]=r(e,o)[e]);return f}function b(i,r,u){var f;t(n.getUrl,i,(f={},f[n.CollectionItemTypeAttr]="all",f[e]=[],f[o]=1e3,f[s]=!0,f),r,u)}function k(i,r,u,f){var h,c;t(n.getUrl,i,(h={},h[e]=[(c={},c[n.CollectionIdAttr]=r,c)],h[o]=1e3,h[s]=!0,h),u,f)}function d(i,r,f,e,o,s,h,c,l){var v;t(n.addUrl,i,(v={},v[n.TargetCollectionAttr]=u(s,o,h),v.Items=[a(e,r,f)],v[n.CollectionItemTypeAttr]=f,v),c,l)}function g(i,r,f,e,o,s,h){var l,c;t(n.delUrl,i,(l={itemReferences:[(c={},c[n.CollectionAttr]=u(r,f),c[n.CollectionItemIdAttr]=e,c)]},l[n.CollectionItemTypeAttr]=o,l),s,h)}function nt(i,r,u,f,e){var o,s;r&&u&&(s={},s.Id=r,s.SourceCollectionId=u,t(n.delUrl,i,(o={},o[n.CollectionItemTypeAttr]="all",o.items=[s],o.itemReferences=[],o),f,e))}function tt(i,r,u,f,e){var o;t(l,i,(o={},o[n.TargetCollectionAttr]={CollectionTitle:r,CollectionTagPath:u},o),f,e)}function u(n,t,i){return n?{PredefinedCollection:n}:t?{CollectionId:t}:{CollectionTitle:i}}var f="Id",h,c,l,i;n.TargetCollectionAttr="targetCollection";var e="targetCollections",o="maxItemsToFetch",s="shouldFetchMetadata";n.CollectionAttr="collection";n.CollectionIdAttr=n.CollectionAttr+f;n.CollectionItemIdAttr=n.CollectionAttr+"Item"+f;n.CollectionItemTypeAttr="CollectionItemType";n.GenericString="generic";h=typeof _G!="undefined"&&(_G===null||_G===void 0?void 0:_G.hst)&&_d.location.host!=="localhost"?_G.hst:"";c=h+"/mysaves/collections/";n.getUrl="get?";n.addUrl="items/add?";n.delUrl="items/delete?";l="create?";i=typeof _G!="undefined"?_G===null||_G===void 0?void 0:_G.IG:null;n.postRequest=t;n.itemFromSchema=a;n.getCollections=b;n.getSingleCollection=k;n.addNonGenericItem=d;n.deleteNonGenericItem=g;n.deleteGenericItem=nt;n.createCollection=tt;n.getCollectionFromSpecifier=u})(MySavesAPIUtils||(MySavesAPIUtils={}))